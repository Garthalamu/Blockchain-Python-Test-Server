<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blockchain Live</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script>
        async function fetchBlockchain() {
        const response = await fetch('/blockchain/live');
        const data = await response.json();
    
        const list = document.getElementById('block-list');
        const count = document.getElementById('block-count');
    
        count.innerText = `Total Blocks: ${data.count}`;
        list.innerHTML = '';
    
        data.blockchain.reverse().forEach(block => {
            const card = document.createElement('div');
            card.className = 'card mb-3 shadow-sm';
    
            const body = document.createElement('div');
            body.className = 'card-body';
    
            body.innerHTML = `
            <h5 class="card-title">Block #${block.index}</h5>
            <p class="card-text">
                <span class="badge bg-primary">Nonce: ${block.nonce}</span>
                <span class="badge bg-success">Txs: ${block.transactions.length}</span>
                <span class="badge bg-warning text-dark">Bits: ${block.bits}</span>
            </p>
            <p class="card-text"><small class="text-muted">Time: ${new Date(block.timestamp * 1000).toLocaleString()}</small></p>
            <p class="card-text"><code style="font-size: 0.8rem">${block.hash}</code></p>
            `;
    
            card.appendChild(body);
            list.appendChild(card);
        });
        }
    
        setInterval(fetchBlockchain, 3000);
        window.onload = fetchBlockchain;
    </script>
</head>
<body class="bg-light">
    <div class="container py-4">
        <h1 class="mb-4">ðŸš€ Live Blockchain</h1>
        <h4 id="block-count" class="mb-4 text-muted">Loading...</h4>
        <div id="block-list"></div>
    </div>
    </body>      
</html>